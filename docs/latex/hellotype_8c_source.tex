\hypertarget{hellotype_8c_source}{}\section{hellotype.\+c}
\label{hellotype_8c_source}\index{src/modules/hellotype.\+c@{src/modules/hellotype.\+c}}

\begin{DoxyCode}
00001 \textcolor{comment}{/* This file implements a new module native data type called "HELLOTYPE".}
00002 \textcolor{comment}{ * The data structure implemented is a very simple ordered linked list of}
00003 \textcolor{comment}{ * 64 bit integers, in order to have something that is real world enough, but}
00004 \textcolor{comment}{ * at the same time, extremely simple to understand, to show how the API}
00005 \textcolor{comment}{ * works, how a new data type is created, and how to write basic methods}
00006 \textcolor{comment}{ * for RDB loading, saving and AOF rewriting.}
00007 \textcolor{comment}{ *}
00008 \textcolor{comment}{ * -----------------------------------------------------------------------------}
00009 \textcolor{comment}{ *}
00010 \textcolor{comment}{ * Copyright (c) 2016, Salvatore Sanfilippo <antirez at gmail dot com>}
00011 \textcolor{comment}{ * All rights reserved.}
00012 \textcolor{comment}{ *}
00013 \textcolor{comment}{ * Redistribution and use in source and binary forms, with or without}
00014 \textcolor{comment}{ * modification, are permitted provided that the following conditions are met:}
00015 \textcolor{comment}{ *}
00016 \textcolor{comment}{ *   * Redistributions of source code must retain the above copyright notice,}
00017 \textcolor{comment}{ *     this list of conditions and the following disclaimer.}
00018 \textcolor{comment}{ *   * Redistributions in binary form must reproduce the above copyright}
00019 \textcolor{comment}{ *     notice, this list of conditions and the following disclaimer in the}
00020 \textcolor{comment}{ *     documentation and/or other materials provided with the distribution.}
00021 \textcolor{comment}{ *   * Neither the name of Redis nor the names of its contributors may be used}
00022 \textcolor{comment}{ *     to endorse or promote products derived from this software without}
00023 \textcolor{comment}{ *     specific prior written permission.}
00024 \textcolor{comment}{ *}
00025 \textcolor{comment}{ * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"}
00026 \textcolor{comment}{ * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE}
00027 \textcolor{comment}{ * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE}
00028 \textcolor{comment}{ * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE}
00029 \textcolor{comment}{ * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR}
00030 \textcolor{comment}{ * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF}
00031 \textcolor{comment}{ * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS}
00032 \textcolor{comment}{ * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN}
00033 \textcolor{comment}{ * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)}
00034 \textcolor{comment}{ * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE}
00035 \textcolor{comment}{ * POSSIBILITY OF SUCH DAMAGE.}
00036 \textcolor{comment}{ */}
00037 
00038 \textcolor{preprocessor}{#}\textcolor{preprocessor}{include} \textcolor{preprocessor}{"../redismodule.h"}
00039 \textcolor{preprocessor}{#}\textcolor{preprocessor}{include} \textcolor{preprocessor}{<}\textcolor{preprocessor}{stdio}\textcolor{preprocessor}{.}\textcolor{preprocessor}{h}\textcolor{preprocessor}{>}
00040 \textcolor{preprocessor}{#}\textcolor{preprocessor}{include} \textcolor{preprocessor}{<}\textcolor{preprocessor}{stdlib}\textcolor{preprocessor}{.}\textcolor{preprocessor}{h}\textcolor{preprocessor}{>}
00041 \textcolor{preprocessor}{#}\textcolor{preprocessor}{include} \textcolor{preprocessor}{<}\textcolor{preprocessor}{ctype}\textcolor{preprocessor}{.}\textcolor{preprocessor}{h}\textcolor{preprocessor}{>}
00042 \textcolor{preprocessor}{#}\textcolor{preprocessor}{include} \textcolor{preprocessor}{<}\textcolor{preprocessor}{string}\textcolor{preprocessor}{.}\textcolor{preprocessor}{h}\textcolor{preprocessor}{>}
00043 \textcolor{preprocessor}{#}\textcolor{preprocessor}{include} \textcolor{preprocessor}{<}\textcolor{preprocessor}{stdint}\textcolor{preprocessor}{.}\textcolor{preprocessor}{h}\textcolor{preprocessor}{>}
00044 
00045 \textcolor{keyword}{static} RedisModuleType *HelloType;
00046 
00047 \textcolor{comment}{/* ========================== Internal data structure  =======================}
00048 \textcolor{comment}{ * This is just a linked list of 64 bit integers where elements are inserted}
00049 \textcolor{comment}{ * in-place, so it's ordered. There is no pop/push operation but just insert}
00050 \textcolor{comment}{ * because it is enough to show the implementation of new data types without}
00051 \textcolor{comment}{ * making things complex. */}
00052 
\Hypertarget{hellotype_8c_source_l00053}\hyperlink{structHelloTypeNode}{00053} \textcolor{keyword}{struct} \hyperlink{structHelloTypeNode}{HelloTypeNode} \{
00054     int64\_t value;
00055     \textcolor{keyword}{struct} \hyperlink{structHelloTypeNode}{HelloTypeNode} *next;
00056 \};
00057 
\Hypertarget{hellotype_8c_source_l00058}\hyperlink{structHelloTypeObject}{00058} \textcolor{keyword}{struct} \hyperlink{structHelloTypeObject}{HelloTypeObject} \{
00059     \textcolor{keyword}{struct} \hyperlink{structHelloTypeNode}{HelloTypeNode} *head;
00060     size\_t len; \textcolor{comment}{/* Number of elements added. */}
00061 \};
00062 
00063 \textcolor{keyword}{struct} \hyperlink{structHelloTypeObject}{HelloTypeObject} *createHelloTypeObject(\textcolor{keywordtype}{void}) \{
00064     \textcolor{keyword}{struct} \hyperlink{structHelloTypeObject}{HelloTypeObject} *o;
00065     o = RedisModule\_Alloc(\textcolor{keyword}{sizeof}(*o));
00066     o->head = NULL;
00067     o->len = 0;
00068     \textcolor{keywordflow}{return} o;
00069 \}
00070 
00071 \textcolor{keywordtype}{void} HelloTypeInsert(\textcolor{keyword}{struct} \hyperlink{structHelloTypeObject}{HelloTypeObject} *o, int64\_t ele) \{
00072     \textcolor{keyword}{struct} \hyperlink{structHelloTypeNode}{HelloTypeNode} *next = o->head, *newnode, *prev = NULL;
00073 
00074     \textcolor{keywordflow}{while}(next && next->value < ele) \{
00075         prev = next;
00076         next = next->next;
00077     \}
00078     newnode = RedisModule\_Alloc(\textcolor{keyword}{sizeof}(*newnode));
00079     newnode->value = ele;
00080     newnode->next = next;
00081     \textcolor{keywordflow}{if} (prev) \{
00082         prev->next = newnode;
00083     \} \textcolor{keywordflow}{else} \{
00084         o->head = newnode;
00085     \}
00086     o->len++;
00087 \}
00088 
00089 \textcolor{keywordtype}{void} HelloTypeReleaseObject(\textcolor{keyword}{struct} \hyperlink{structHelloTypeObject}{HelloTypeObject} *o) \{
00090     \textcolor{keyword}{struct} \hyperlink{structHelloTypeNode}{HelloTypeNode} *cur, *next;
00091     cur = o->head;
00092     \textcolor{keywordflow}{while}(cur) \{
00093         next = cur->next;
00094         RedisModule\_Free(cur);
00095         cur = next;
00096     \}
00097     RedisModule\_Free(o);
00098 \}
00099 
00100 \textcolor{comment}{/* ========================= "hellotype" type commands ======================= */}
00101 
00102 \textcolor{comment}{/* HELLOTYPE.INSERT key value */}
00103 \textcolor{keywordtype}{int} HelloTypeInsert\_RedisCommand(RedisModuleCtx *ctx, RedisModuleString **argv, \textcolor{keywordtype}{int} argc) \{
00104     RedisModule\_AutoMemory(ctx); \textcolor{comment}{/* Use automatic memory management. */}
00105 
00106     \textcolor{keywordflow}{if} (argc != 3) \textcolor{keywordflow}{return} RedisModule\_WrongArity(ctx);
00107     RedisModuleKey *key = RedisModule\_OpenKey(ctx,argv[1],
00108         \hyperlink{redismodule_8h_a369d2ff4bca768b05f826a12dd694825}{REDISMODULE\_READ}|\hyperlink{redismodule_8h_a73b37117ef94cb4a904361afcc51b6b4}{REDISMODULE\_WRITE});
00109     \textcolor{keywordtype}{int} type = RedisModule\_KeyType(key);
00110     \textcolor{keywordflow}{if} (type != \hyperlink{redismodule_8h_adf2819748eb5e89c621d2c9c65c0b5f7}{REDISMODULE\_KEYTYPE\_EMPTY} &&
00111         RedisModule\_ModuleTypeGetType(key) != HelloType)
00112     \{
00113         \textcolor{keywordflow}{return} RedisModule\_ReplyWithError(ctx,
      \hyperlink{redismodule_8h_ab897689b0673a1e4cbc097cb5bce04c1}{REDISMODULE\_ERRORMSG\_WRONGTYPE});
00114     \}
00115 
00116     \textcolor{keywordtype}{long} \textcolor{keywordtype}{long} value;
00117     \textcolor{keywordflow}{if} ((RedisModule\_StringToLongLong(argv[2],&value) != \hyperlink{redismodule_8h_a1bc5bfd69abcd378ff52c640adc5418d}{REDISMODULE\_OK})) \{
00118         \textcolor{keywordflow}{return} RedisModule\_ReplyWithError(ctx,\textcolor{stringliteral}{"ERR invalid value: must be a signed 64 bit integer"});
00119     \}
00120 
00121     \textcolor{comment}{/* Create an empty value object if the key is currently empty. */}
00122     \textcolor{keyword}{struct} \hyperlink{structHelloTypeObject}{HelloTypeObject} *hto;
00123     \textcolor{keywordflow}{if} (type == \hyperlink{redismodule_8h_adf2819748eb5e89c621d2c9c65c0b5f7}{REDISMODULE\_KEYTYPE\_EMPTY}) \{
00124         hto = createHelloTypeObject();
00125         RedisModule\_ModuleTypeSetValue(key,HelloType,hto);
00126     \} \textcolor{keywordflow}{else} \{
00127         hto = RedisModule\_ModuleTypeGetValue(key);
00128     \}
00129 
00130     \textcolor{comment}{/* Insert the new element. */}
00131     HelloTypeInsert(hto,value);
00132 
00133     RedisModule\_ReplyWithLongLong(ctx,hto->len);
00134     RedisModule\_ReplicateVerbatim(ctx);
00135     \textcolor{keywordflow}{return} \hyperlink{redismodule_8h_a1bc5bfd69abcd378ff52c640adc5418d}{REDISMODULE\_OK};
00136 \}
00137 
00138 \textcolor{comment}{/* HELLOTYPE.RANGE key first count */}
00139 \textcolor{keywordtype}{int} HelloTypeRange\_RedisCommand(RedisModuleCtx *ctx, RedisModuleString **argv, \textcolor{keywordtype}{int} argc) \{
00140     RedisModule\_AutoMemory(ctx); \textcolor{comment}{/* Use automatic memory management. */}
00141 
00142     \textcolor{keywordflow}{if} (argc != 4) \textcolor{keywordflow}{return} RedisModule\_WrongArity(ctx);
00143     RedisModuleKey *key = RedisModule\_OpenKey(ctx,argv[1],
00144         \hyperlink{redismodule_8h_a369d2ff4bca768b05f826a12dd694825}{REDISMODULE\_READ}|\hyperlink{redismodule_8h_a73b37117ef94cb4a904361afcc51b6b4}{REDISMODULE\_WRITE});
00145     \textcolor{keywordtype}{int} type = RedisModule\_KeyType(key);
00146     \textcolor{keywordflow}{if} (type != \hyperlink{redismodule_8h_adf2819748eb5e89c621d2c9c65c0b5f7}{REDISMODULE\_KEYTYPE\_EMPTY} &&
00147         RedisModule\_ModuleTypeGetType(key) != HelloType)
00148     \{
00149         \textcolor{keywordflow}{return} RedisModule\_ReplyWithError(ctx,
      \hyperlink{redismodule_8h_ab897689b0673a1e4cbc097cb5bce04c1}{REDISMODULE\_ERRORMSG\_WRONGTYPE});
00150     \}
00151 
00152     \textcolor{keywordtype}{long} \textcolor{keywordtype}{long} first, count;
00153     \textcolor{keywordflow}{if} (RedisModule\_StringToLongLong(argv[2],&first) != \hyperlink{redismodule_8h_a1bc5bfd69abcd378ff52c640adc5418d}{REDISMODULE\_OK} ||
00154         RedisModule\_StringToLongLong(argv[3],&count) != \hyperlink{redismodule_8h_a1bc5bfd69abcd378ff52c640adc5418d}{REDISMODULE\_OK} ||
00155         first < 0 || count < 0)
00156     \{
00157         \textcolor{keywordflow}{return} RedisModule\_ReplyWithError(ctx,
00158             \textcolor{stringliteral}{"ERR invalid first or count parameters"});
00159     \}
00160 
00161     \textcolor{keyword}{struct} \hyperlink{structHelloTypeObject}{HelloTypeObject} *hto = RedisModule\_ModuleTypeGetValue(key);
00162     \textcolor{keyword}{struct} \hyperlink{structHelloTypeNode}{HelloTypeNode} *node = hto ? hto->head : NULL;
00163     RedisModule\_ReplyWithArray(ctx,\hyperlink{redismodule_8h_af07005134cbf107aad1c8e0ded8fcf2b}{REDISMODULE\_POSTPONED\_ARRAY\_LEN});
00164     \textcolor{keywordtype}{long} \textcolor{keywordtype}{long} arraylen = 0;
00165     \textcolor{keywordflow}{while}(node && count--) \{
00166         RedisModule\_ReplyWithLongLong(ctx,node->value);
00167         arraylen++;
00168         node = node->next;
00169     \}
00170     RedisModule\_ReplySetArrayLength(ctx,arraylen);
00171     \textcolor{keywordflow}{return} \hyperlink{redismodule_8h_a1bc5bfd69abcd378ff52c640adc5418d}{REDISMODULE\_OK};
00172 \}
00173 
00174 \textcolor{comment}{/* HELLOTYPE.LEN key */}
00175 \textcolor{keywordtype}{int} HelloTypeLen\_RedisCommand(RedisModuleCtx *ctx, RedisModuleString **argv, \textcolor{keywordtype}{int} argc) \{
00176     RedisModule\_AutoMemory(ctx); \textcolor{comment}{/* Use automatic memory management. */}
00177 
00178     \textcolor{keywordflow}{if} (argc != 2) \textcolor{keywordflow}{return} RedisModule\_WrongArity(ctx);
00179     RedisModuleKey *key = RedisModule\_OpenKey(ctx,argv[1],
00180         \hyperlink{redismodule_8h_a369d2ff4bca768b05f826a12dd694825}{REDISMODULE\_READ}|\hyperlink{redismodule_8h_a73b37117ef94cb4a904361afcc51b6b4}{REDISMODULE\_WRITE});
00181     \textcolor{keywordtype}{int} type = RedisModule\_KeyType(key);
00182     \textcolor{keywordflow}{if} (type != \hyperlink{redismodule_8h_adf2819748eb5e89c621d2c9c65c0b5f7}{REDISMODULE\_KEYTYPE\_EMPTY} &&
00183         RedisModule\_ModuleTypeGetType(key) != HelloType)
00184     \{
00185         \textcolor{keywordflow}{return} RedisModule\_ReplyWithError(ctx,
      \hyperlink{redismodule_8h_ab897689b0673a1e4cbc097cb5bce04c1}{REDISMODULE\_ERRORMSG\_WRONGTYPE});
00186     \}
00187 
00188     \textcolor{keyword}{struct} \hyperlink{structHelloTypeObject}{HelloTypeObject} *hto = RedisModule\_ModuleTypeGetValue(key);
00189     RedisModule\_ReplyWithLongLong(ctx,hto ? hto->len : 0);
00190     \textcolor{keywordflow}{return} \hyperlink{redismodule_8h_a1bc5bfd69abcd378ff52c640adc5418d}{REDISMODULE\_OK};
00191 \}
00192 
00193 
00194 \textcolor{comment}{/* ========================== "hellotype" type methods ======================= */}
00195 
00196 \textcolor{keywordtype}{void} *HelloTypeRdbLoad(RedisModuleIO *rdb, \textcolor{keywordtype}{int} encver) \{
00197     \textcolor{keywordflow}{if} (encver != 0) \{
00198         \textcolor{comment}{/* RedisModule\_Log("warning","Can't load data with version %d", encver);*/}
00199         \textcolor{keywordflow}{return} NULL;
00200     \}
00201     uint64\_t elements = RedisModule\_LoadUnsigned(rdb);
00202     \textcolor{keyword}{struct} \hyperlink{structHelloTypeObject}{HelloTypeObject} *hto = createHelloTypeObject();
00203     \textcolor{keywordflow}{while}(elements--) \{
00204         int64\_t ele = RedisModule\_LoadSigned(rdb);
00205         HelloTypeInsert(hto,ele);
00206     \}
00207     \textcolor{keywordflow}{return} hto;
00208 \}
00209 
00210 \textcolor{keywordtype}{void} HelloTypeRdbSave(RedisModuleIO *rdb, \textcolor{keywordtype}{void} *value) \{
00211     \textcolor{keyword}{struct} \hyperlink{structHelloTypeObject}{HelloTypeObject} *hto = value;
00212     \textcolor{keyword}{struct} \hyperlink{structHelloTypeNode}{HelloTypeNode} *node = hto->head;
00213     RedisModule\_SaveUnsigned(rdb,hto->len);
00214     \textcolor{keywordflow}{while}(node) \{
00215         RedisModule\_SaveSigned(rdb,node->value);
00216         node = node->next;
00217     \}
00218 \}
00219 
00220 \textcolor{keywordtype}{void} HelloTypeAofRewrite(RedisModuleIO *aof, RedisModuleString *key, \textcolor{keywordtype}{void} *value) \{
00221     \textcolor{keyword}{struct} \hyperlink{structHelloTypeObject}{HelloTypeObject} *hto = value;
00222     \textcolor{keyword}{struct} \hyperlink{structHelloTypeNode}{HelloTypeNode} *node = hto->head;
00223     \textcolor{keywordflow}{while}(node) \{
00224         RedisModule\_EmitAOF(aof,\textcolor{stringliteral}{"HELLOTYPE.INSERT"},\textcolor{stringliteral}{"sl"},key,node->value);
00225         node = node->next;
00226     \}
00227 \}
00228 
00229 \textcolor{comment}{/* The goal of this function is to return the amount of memory used by}
00230 \textcolor{comment}{ * the HelloType value. */}
00231 size\_t HelloTypeMemUsage(\textcolor{keyword}{const} \textcolor{keywordtype}{void} *value) \{
00232     \textcolor{keyword}{const} \textcolor{keyword}{struct} \hyperlink{structHelloTypeObject}{HelloTypeObject} *hto = value;
00233     \textcolor{keyword}{struct} \hyperlink{structHelloTypeNode}{HelloTypeNode} *node = hto->head;
00234     \textcolor{keywordflow}{return} \textcolor{keyword}{sizeof}(*hto) + \textcolor{keyword}{sizeof}(*node)*hto->len;
00235 \}
00236 
00237 \textcolor{keywordtype}{void} HelloTypeFree(\textcolor{keywordtype}{void} *value) \{
00238     HelloTypeReleaseObject(value);
00239 \}
00240 
00241 \textcolor{keywordtype}{void} HelloTypeDigest(RedisModuleDigest *md, \textcolor{keywordtype}{void} *value) \{
00242     \textcolor{keyword}{struct} \hyperlink{structHelloTypeObject}{HelloTypeObject} *hto = value;
00243     \textcolor{keyword}{struct} \hyperlink{structHelloTypeNode}{HelloTypeNode} *node = hto->head;
00244     \textcolor{keywordflow}{while}(node) \{
00245         RedisModule\_DigestAddLongLong(md,node->value);
00246         node = node->next;
00247     \}
00248     RedisModule\_DigestEndSequence(md);
00249 \}
00250 
00251 \textcolor{comment}{/* This function must be present on each Redis module. It is used in order to}
00252 \textcolor{comment}{ * register the commands into the Redis server. */}
00253 \textcolor{keywordtype}{int} RedisModule\_OnLoad(RedisModuleCtx *ctx, RedisModuleString **argv, \textcolor{keywordtype}{int} argc) \{
00254     \hyperlink{redismodule_8h_a46d75d81383a00bd6b941af6cadf64c2}{REDISMODULE\_NOT\_USED}(argv);
00255     \hyperlink{redismodule_8h_a46d75d81383a00bd6b941af6cadf64c2}{REDISMODULE\_NOT\_USED}(argc);
00256 
00257     \textcolor{keywordflow}{if} (RedisModule\_Init(ctx,\textcolor{stringliteral}{"hellotype"},1,\hyperlink{redismodule_8h_a1fc9be44e4cd6d60f7129d4393b6b580}{REDISMODULE\_APIVER\_1})
00258         == \hyperlink{redismodule_8h_a3df6f5bd5247289e66f44437a7cddd49}{REDISMODULE\_ERR}) \textcolor{keywordflow}{return} \hyperlink{redismodule_8h_a3df6f5bd5247289e66f44437a7cddd49}{REDISMODULE\_ERR};
00259 
00260     RedisModuleTypeMethods tm = \{
00261         .version = \hyperlink{redismodule_8h_aaab768795ed94afdaad24fefae993d22}{REDISMODULE\_TYPE\_METHOD\_VERSION},
00262         .rdb\_load = HelloTypeRdbLoad,
00263         .rdb\_save = HelloTypeRdbSave,
00264         .aof\_rewrite = HelloTypeAofRewrite,
00265         .mem\_usage = HelloTypeMemUsage,
00266         .free = HelloTypeFree,
00267         .digest = HelloTypeDigest
00268     \};
00269 
00270     HelloType = RedisModule\_CreateDataType(ctx,\textcolor{stringliteral}{"hellotype"},0,&tm);
00271     \textcolor{keywordflow}{if} (HelloType == NULL) \textcolor{keywordflow}{return} \hyperlink{redismodule_8h_a3df6f5bd5247289e66f44437a7cddd49}{REDISMODULE\_ERR};
00272 
00273     \textcolor{keywordflow}{if} (RedisModule\_CreateCommand(ctx,\textcolor{stringliteral}{"hellotype.insert"},
00274         HelloTypeInsert\_RedisCommand,\textcolor{stringliteral}{"write deny-oom"},1,1,1) == 
      \hyperlink{redismodule_8h_a3df6f5bd5247289e66f44437a7cddd49}{REDISMODULE\_ERR})
00275         \textcolor{keywordflow}{return} \hyperlink{redismodule_8h_a3df6f5bd5247289e66f44437a7cddd49}{REDISMODULE\_ERR};
00276 
00277     \textcolor{keywordflow}{if} (RedisModule\_CreateCommand(ctx,\textcolor{stringliteral}{"hellotype.range"},
00278         HelloTypeRange\_RedisCommand,\textcolor{stringliteral}{"readonly"},1,1,1) == \hyperlink{redismodule_8h_a3df6f5bd5247289e66f44437a7cddd49}{REDISMODULE\_ERR})
00279         \textcolor{keywordflow}{return} \hyperlink{redismodule_8h_a3df6f5bd5247289e66f44437a7cddd49}{REDISMODULE\_ERR};
00280 
00281     \textcolor{keywordflow}{if} (RedisModule\_CreateCommand(ctx,\textcolor{stringliteral}{"hellotype.len"},
00282         HelloTypeLen\_RedisCommand,\textcolor{stringliteral}{"readonly"},1,1,1) == \hyperlink{redismodule_8h_a3df6f5bd5247289e66f44437a7cddd49}{REDISMODULE\_ERR})
00283         \textcolor{keywordflow}{return} \hyperlink{redismodule_8h_a3df6f5bd5247289e66f44437a7cddd49}{REDISMODULE\_ERR};
00284 
00285     \textcolor{keywordflow}{return} \hyperlink{redismodule_8h_a1bc5bfd69abcd378ff52c640adc5418d}{REDISMODULE\_OK};
00286 \}
\end{DoxyCode}
