\hypertarget{dict_8h_source}{}\section{dict.\+h}
\label{dict_8h_source}\index{src/dict.\+h@{src/dict.\+h}}

\begin{DoxyCode}
00001 \textcolor{comment}{/* Hash Tables Implementation.}
00002 \textcolor{comment}{ *}
00003 \textcolor{comment}{ * This file implements in-memory hash tables with insert/del/replace/find/}
00004 \textcolor{comment}{ * get-random-element operations. Hash tables will auto-resize if needed}
00005 \textcolor{comment}{ * tables of power of two in size are used, collisions are handled by}
00006 \textcolor{comment}{ * chaining. See the source code for more information... :)}
00007 \textcolor{comment}{ *}
00008 \textcolor{comment}{ * Copyright (c) 2006-2012, Salvatore Sanfilippo <antirez at gmail dot com>}
00009 \textcolor{comment}{ * All rights reserved.}
00010 \textcolor{comment}{ *}
00011 \textcolor{comment}{ * Redistribution and use in source and binary forms, with or without}
00012 \textcolor{comment}{ * modification, are permitted provided that the following conditions are met:}
00013 \textcolor{comment}{ *}
00014 \textcolor{comment}{ *   * Redistributions of source code must retain the above copyright notice,}
00015 \textcolor{comment}{ *     this list of conditions and the following disclaimer.}
00016 \textcolor{comment}{ *   * Redistributions in binary form must reproduce the above copyright}
00017 \textcolor{comment}{ *     notice, this list of conditions and the following disclaimer in the}
00018 \textcolor{comment}{ *     documentation and/or other materials provided with the distribution.}
00019 \textcolor{comment}{ *   * Neither the name of Redis nor the names of its contributors may be used}
00020 \textcolor{comment}{ *     to endorse or promote products derived from this software without}
00021 \textcolor{comment}{ *     specific prior written permission.}
00022 \textcolor{comment}{ *}
00023 \textcolor{comment}{ * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"}
00024 \textcolor{comment}{ * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE}
00025 \textcolor{comment}{ * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE}
00026 \textcolor{comment}{ * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE}
00027 \textcolor{comment}{ * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR}
00028 \textcolor{comment}{ * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF}
00029 \textcolor{comment}{ * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS}
00030 \textcolor{comment}{ * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN}
00031 \textcolor{comment}{ * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)}
00032 \textcolor{comment}{ * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE}
00033 \textcolor{comment}{ * POSSIBILITY OF SUCH DAMAGE.}
00034 \textcolor{comment}{ */}
00035 
00036 \textcolor{preprocessor}{#}\textcolor{preprocessor}{include} \textcolor{preprocessor}{<}\textcolor{preprocessor}{stdint}\textcolor{preprocessor}{.}\textcolor{preprocessor}{h}\textcolor{preprocessor}{>}
00037 
00038 \textcolor{preprocessor}{#}\textcolor{preprocessor}{ifndef} \textcolor{preprocessor}{\_\_DICT\_H}
00039 \textcolor{preprocessor}{#}\textcolor{preprocessor}{define} \textcolor{preprocessor}{\_\_DICT\_H}
00040 
00041 \textcolor{preprocessor}{#}\textcolor{preprocessor}{define} \textcolor{preprocessor}{DICT\_OK} 0
00042 \textcolor{preprocessor}{#}\textcolor{preprocessor}{define} \textcolor{preprocessor}{DICT\_ERR} 1
00043 
00044 \textcolor{comment}{/* Unused arguments generate annoying warnings... */}
00045 \textcolor{preprocessor}{#}\textcolor{preprocessor}{define} \textcolor{preprocessor}{DICT\_NOTUSED}\textcolor{preprocessor}{(}\textcolor{preprocessor}{V}\textcolor{preprocessor}{)} \textcolor{preprocessor}{(}\textcolor{preprocessor}{(}\textcolor{keywordtype}{void}\textcolor{preprocessor}{)} \textcolor{preprocessor}{V}\textcolor{preprocessor}{)}
00046 
\Hypertarget{dict_8h_source_l00047}\hyperlink{structdictEntry}{00047} \textcolor{keyword}{typedef} \textcolor{keyword}{struct} \hyperlink{structdictEntry}{dictEntry} \{
00048     \textcolor{keywordtype}{void} *key;
\Hypertarget{dict_8h_source_l00049}\hyperlink{uniondictEntry_8v}{00049}     \textcolor{keyword}{union} \{
00050         \textcolor{keywordtype}{void} *val;
00051         uint64\_t u64;
00052         int64\_t s64;
00053         \textcolor{keywordtype}{double} d;
00054     \} v;
00055     \textcolor{keyword}{struct} \hyperlink{structdictEntry}{dictEntry} *next;
00056 \} dictEntry;
00057 
\Hypertarget{dict_8h_source_l00058}\hyperlink{structdictType}{00058} \textcolor{keyword}{typedef} \textcolor{keyword}{struct} \hyperlink{structdictType}{dictType} \{
00059     uint64\_t (*hashFunction)(\textcolor{keyword}{const} \textcolor{keywordtype}{void} *key);
00060     \textcolor{keywordtype}{void} *(*keyDup)(\textcolor{keywordtype}{void} *privdata, \textcolor{keyword}{const} \textcolor{keywordtype}{void} *key);
00061     \textcolor{keywordtype}{void} *(*valDup)(\textcolor{keywordtype}{void} *privdata, \textcolor{keyword}{const} \textcolor{keywordtype}{void} *obj);
00062     \textcolor{keywordtype}{int} (*keyCompare)(\textcolor{keywordtype}{void} *privdata, \textcolor{keyword}{const} \textcolor{keywordtype}{void} *key1, \textcolor{keyword}{const} \textcolor{keywordtype}{void} *key2);
00063     \textcolor{keywordtype}{void} (*keyDestructor)(\textcolor{keywordtype}{void} *privdata, \textcolor{keywordtype}{void} *key);
00064     \textcolor{keywordtype}{void} (*valDestructor)(\textcolor{keywordtype}{void} *privdata, \textcolor{keywordtype}{void} *obj);
00065 \} dictType;
00066 
00067 \textcolor{comment}{/* This is our hash table structure. Every dictionary has two of this as we}
00068 \textcolor{comment}{ * implement incremental rehashing, for the old to the new table. */}
\Hypertarget{dict_8h_source_l00069}\hyperlink{structdictht}{00069} \textcolor{keyword}{typedef} \textcolor{keyword}{struct} \hyperlink{structdictht}{dictht} \{
00070     dictEntry **table;
00071     \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{long} size;
00072     \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{long} sizemask;
00073     \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{long} used;
00074 \} dictht;
00075 
\Hypertarget{dict_8h_source_l00076}\hyperlink{structdict}{00076} \textcolor{keyword}{typedef} \textcolor{keyword}{struct} \hyperlink{structdict}{dict} \{
00077     dictType *type;
00078     \textcolor{keywordtype}{void} *privdata;
00079     dictht ht[2];
00080     \textcolor{keywordtype}{long} rehashidx; \textcolor{comment}{/* rehashing not in progress if rehashidx == -1 */}
00081     \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{long} iterators; \textcolor{comment}{/* number of iterators currently running */}
00082 \} dict;
00083 
00084 \textcolor{comment}{/* If safe is set to 1 this is a safe iterator, that means, you can call}
00085 \textcolor{comment}{ * dictAdd, dictFind, and other functions against the dictionary even while}
00086 \textcolor{comment}{ * iterating. Otherwise it is a non safe iterator, and only dictNext()}
00087 \textcolor{comment}{ * should be called while iterating. */}
\Hypertarget{dict_8h_source_l00088}\hyperlink{structdictIterator}{00088} \textcolor{keyword}{typedef} \textcolor{keyword}{struct} \hyperlink{structdictIterator}{dictIterator} \{
00089     dict *d;
00090     \textcolor{keywordtype}{long} index;
00091     \textcolor{keywordtype}{int} table, safe;
00092     dictEntry *entry, *nextEntry;
00093     \textcolor{comment}{/* unsafe iterator fingerprint for misuse detection. */}
00094     \textcolor{keywordtype}{long} \textcolor{keywordtype}{long} fingerprint;
00095 \} dictIterator;
00096 
00097 \textcolor{keyword}{typedef} \textcolor{keywordtype}{void} (dictScanFunction)(\textcolor{keywordtype}{void} *privdata, \textcolor{keyword}{const} dictEntry *de);
00098 \textcolor{keyword}{typedef} \textcolor{keywordtype}{void} (dictScanBucketFunction)(\textcolor{keywordtype}{void} *privdata, dictEntry **bucketref);
00099 
00100 \textcolor{comment}{/* This is the initial size of every hash table */}
00101 \textcolor{preprocessor}{#}\textcolor{preprocessor}{define} \textcolor{preprocessor}{DICT\_HT\_INITIAL\_SIZE}     4
00102 
00103 \textcolor{comment}{/* ------------------------------- Macros ------------------------------------*/}
00104 \textcolor{preprocessor}{#}\textcolor{preprocessor}{define} \textcolor{preprocessor}{dictFreeVal}\textcolor{preprocessor}{(}\textcolor{preprocessor}{d}\textcolor{preprocessor}{,} \textcolor{preprocessor}{entry}\textcolor{preprocessor}{)}
00105     \textcolor{keywordflow}{if} \textcolor{preprocessor}{(}\textcolor{preprocessor}{(}\textcolor{preprocessor}{d}\textcolor{preprocessor}{)}\textcolor{preprocessor}{->}\textcolor{preprocessor}{type}\textcolor{preprocessor}{->}\textcolor{preprocessor}{valDestructor}\textcolor{preprocessor}{)}
00106         \textcolor{preprocessor}{(}\textcolor{preprocessor}{d}\textcolor{preprocessor}{)}\textcolor{preprocessor}{->}\textcolor{preprocessor}{type}\textcolor{preprocessor}{->}\textcolor{preprocessor}{valDestructor}\textcolor{preprocessor}{(}\textcolor{preprocessor}{(}\textcolor{preprocessor}{d}\textcolor{preprocessor}{)}\textcolor{preprocessor}{->}\textcolor{preprocessor}{privdata}\textcolor{preprocessor}{,} \textcolor{preprocessor}{(}\textcolor{preprocessor}{entry}\textcolor{preprocessor}{)}\textcolor{preprocessor}{->}\textcolor{preprocessor}{v}\textcolor{preprocessor}{.}\textcolor{preprocessor}{val}\textcolor{preprocessor}{)}
00107 
00108 \textcolor{preprocessor}{#}\textcolor{preprocessor}{define} \textcolor{preprocessor}{dictSetVal}\textcolor{preprocessor}{(}\textcolor{preprocessor}{d}\textcolor{preprocessor}{,} \textcolor{preprocessor}{entry}\textcolor{preprocessor}{,} \textcolor{preprocessor}{\_val\_}\textcolor{preprocessor}{)} \textcolor{keywordflow}{do} \textcolor{preprocessor}{\{}
00109     \textcolor{keywordflow}{if} \textcolor{preprocessor}{(}\textcolor{preprocessor}{(}\textcolor{preprocessor}{d}\textcolor{preprocessor}{)}\textcolor{preprocessor}{->}\textcolor{preprocessor}{type}\textcolor{preprocessor}{->}\textcolor{preprocessor}{valDup}\textcolor{preprocessor}{)}
00110         \textcolor{preprocessor}{(}\textcolor{preprocessor}{entry}\textcolor{preprocessor}{)}\textcolor{preprocessor}{->}\textcolor{preprocessor}{v}\textcolor{preprocessor}{.}\textcolor{preprocessor}{val} \textcolor{preprocessor}{=} \textcolor{preprocessor}{(}\textcolor{preprocessor}{d}\textcolor{preprocessor}{)}\textcolor{preprocessor}{->}\textcolor{preprocessor}{type}\textcolor{preprocessor}{->}\textcolor{preprocessor}{valDup}\textcolor{preprocessor}{(}\textcolor{preprocessor}{(}\textcolor{preprocessor}{d}\textcolor{preprocessor}{)}\textcolor{preprocessor}{->}\textcolor{preprocessor}{privdata}\textcolor{preprocessor}{,} \textcolor{preprocessor}{\_val\_}\textcolor{preprocessor}{)}\textcolor{preprocessor}{;}
00111     \textcolor{keywordflow}{else}
00112         \textcolor{preprocessor}{(}\textcolor{preprocessor}{entry}\textcolor{preprocessor}{)}\textcolor{preprocessor}{->}\textcolor{preprocessor}{v}\textcolor{preprocessor}{.}\textcolor{preprocessor}{val} \textcolor{preprocessor}{=} \textcolor{preprocessor}{(}\textcolor{preprocessor}{\_val\_}\textcolor{preprocessor}{)}\textcolor{preprocessor}{;} \textcolor{preprocessor}{\(\backslash\)}
00113 \textcolor{preprocessor}{\}}\textcolor{keywordflow}{while}\textcolor{preprocessor}{(}0\textcolor{preprocessor}{)}
00114 
00115 \textcolor{preprocessor}{#}\textcolor{preprocessor}{define} \textcolor{preprocessor}{dictSetSignedIntegerVal}\textcolor{preprocessor}{(}\textcolor{preprocessor}{entry}\textcolor{preprocessor}{,} \textcolor{preprocessor}{\_val\_}\textcolor{preprocessor}{)}
00116     \textcolor{keywordflow}{do} \textcolor{preprocessor}{\{} \textcolor{preprocessor}{(}\textcolor{preprocessor}{entry}\textcolor{preprocessor}{)}\textcolor{preprocessor}{->}\textcolor{preprocessor}{v}\textcolor{preprocessor}{.}\textcolor{preprocessor}{s64} \textcolor{preprocessor}{=} \textcolor{preprocessor}{\_val\_}\textcolor{preprocessor}{;} \textcolor{preprocessor}{\}} \textcolor{keywordflow}{while}\textcolor{preprocessor}{(}0\textcolor{preprocessor}{)}
00117 
00118 \textcolor{preprocessor}{#}\textcolor{preprocessor}{define} \textcolor{preprocessor}{dictSetUnsignedIntegerVal}\textcolor{preprocessor}{(}\textcolor{preprocessor}{entry}\textcolor{preprocessor}{,} \textcolor{preprocessor}{\_val\_}\textcolor{preprocessor}{)}
00119     \textcolor{keywordflow}{do} \textcolor{preprocessor}{\{} \textcolor{preprocessor}{(}\textcolor{preprocessor}{entry}\textcolor{preprocessor}{)}\textcolor{preprocessor}{->}\textcolor{preprocessor}{v}\textcolor{preprocessor}{.}\textcolor{preprocessor}{u64} \textcolor{preprocessor}{=} \textcolor{preprocessor}{\_val\_}\textcolor{preprocessor}{;} \textcolor{preprocessor}{\}} \textcolor{keywordflow}{while}\textcolor{preprocessor}{(}0\textcolor{preprocessor}{)}
00120 
00121 \textcolor{preprocessor}{#}\textcolor{preprocessor}{define} \textcolor{preprocessor}{dictSetDoubleVal}\textcolor{preprocessor}{(}\textcolor{preprocessor}{entry}\textcolor{preprocessor}{,} \textcolor{preprocessor}{\_val\_}\textcolor{preprocessor}{)}
00122     \textcolor{keywordflow}{do} \textcolor{preprocessor}{\{} \textcolor{preprocessor}{(}\textcolor{preprocessor}{entry}\textcolor{preprocessor}{)}\textcolor{preprocessor}{->}\textcolor{preprocessor}{v}\textcolor{preprocessor}{.}\textcolor{preprocessor}{d} \textcolor{preprocessor}{=} \textcolor{preprocessor}{\_val\_}\textcolor{preprocessor}{;} \textcolor{preprocessor}{\}} \textcolor{keywordflow}{while}\textcolor{preprocessor}{(}0\textcolor{preprocessor}{)}
00123 
00124 \textcolor{preprocessor}{#}\textcolor{preprocessor}{define} \textcolor{preprocessor}{dictFreeKey}\textcolor{preprocessor}{(}\textcolor{preprocessor}{d}\textcolor{preprocessor}{,} \textcolor{preprocessor}{entry}\textcolor{preprocessor}{)}
00125     \textcolor{keywordflow}{if} \textcolor{preprocessor}{(}\textcolor{preprocessor}{(}\textcolor{preprocessor}{d}\textcolor{preprocessor}{)}\textcolor{preprocessor}{->}\textcolor{preprocessor}{type}\textcolor{preprocessor}{->}\textcolor{preprocessor}{keyDestructor}\textcolor{preprocessor}{)}
00126         \textcolor{preprocessor}{(}\textcolor{preprocessor}{d}\textcolor{preprocessor}{)}\textcolor{preprocessor}{->}\textcolor{preprocessor}{type}\textcolor{preprocessor}{->}\textcolor{preprocessor}{keyDestructor}\textcolor{preprocessor}{(}\textcolor{preprocessor}{(}\textcolor{preprocessor}{d}\textcolor{preprocessor}{)}\textcolor{preprocessor}{->}\textcolor{preprocessor}{privdata}\textcolor{preprocessor}{,} \textcolor{preprocessor}{(}\textcolor{preprocessor}{entry}\textcolor{preprocessor}{)}\textcolor{preprocessor}{->}\textcolor{preprocessor}{key}\textcolor{preprocessor}{)}
00127 
00128 \textcolor{preprocessor}{#}\textcolor{preprocessor}{define} \textcolor{preprocessor}{dictSetKey}\textcolor{preprocessor}{(}\textcolor{preprocessor}{d}\textcolor{preprocessor}{,} \textcolor{preprocessor}{entry}\textcolor{preprocessor}{,} \textcolor{preprocessor}{\_key\_}\textcolor{preprocessor}{)} \textcolor{keywordflow}{do} \textcolor{preprocessor}{\{}
00129     \textcolor{keywordflow}{if} \textcolor{preprocessor}{(}\textcolor{preprocessor}{(}\textcolor{preprocessor}{d}\textcolor{preprocessor}{)}\textcolor{preprocessor}{->}\textcolor{preprocessor}{type}\textcolor{preprocessor}{->}\textcolor{preprocessor}{keyDup}\textcolor{preprocessor}{)}
00130         \textcolor{preprocessor}{(}\textcolor{preprocessor}{entry}\textcolor{preprocessor}{)}\textcolor{preprocessor}{->}\textcolor{preprocessor}{key} \textcolor{preprocessor}{=} \textcolor{preprocessor}{(}\textcolor{preprocessor}{d}\textcolor{preprocessor}{)}\textcolor{preprocessor}{->}\textcolor{preprocessor}{type}\textcolor{preprocessor}{->}\textcolor{preprocessor}{keyDup}\textcolor{preprocessor}{(}\textcolor{preprocessor}{(}\textcolor{preprocessor}{d}\textcolor{preprocessor}{)}\textcolor{preprocessor}{->}\textcolor{preprocessor}{privdata}\textcolor{preprocessor}{,} \textcolor{preprocessor}{\_key\_}\textcolor{preprocessor}{)}\textcolor{preprocessor}{;}
00131     \textcolor{keywordflow}{else}
00132         \textcolor{preprocessor}{(}\textcolor{preprocessor}{entry}\textcolor{preprocessor}{)}\textcolor{preprocessor}{->}\textcolor{preprocessor}{key} \textcolor{preprocessor}{=} \textcolor{preprocessor}{(}\textcolor{preprocessor}{\_key\_}\textcolor{preprocessor}{)}\textcolor{preprocessor}{;} \textcolor{preprocessor}{\(\backslash\)}
00133 \textcolor{preprocessor}{\}}\textcolor{keywordflow}{while}\textcolor{preprocessor}{(}0\textcolor{preprocessor}{)}
00134 
00135 \textcolor{preprocessor}{#}\textcolor{preprocessor}{define} \textcolor{preprocessor}{dictCompareKeys}\textcolor{preprocessor}{(}\textcolor{preprocessor}{d}\textcolor{preprocessor}{,} \textcolor{preprocessor}{key1}\textcolor{preprocessor}{,} \textcolor{preprocessor}{key2}\textcolor{preprocessor}{)}
00136     \textcolor{preprocessor}{(}\textcolor{preprocessor}{(}\textcolor{preprocessor}{(}\textcolor{preprocessor}{d}\textcolor{preprocessor}{)}\textcolor{preprocessor}{->}\textcolor{preprocessor}{type}\textcolor{preprocessor}{->}\textcolor{preprocessor}{keyCompare}\textcolor{preprocessor}{)} \textcolor{preprocessor}{?}
00137         \textcolor{preprocessor}{(}\textcolor{preprocessor}{d}\textcolor{preprocessor}{)}\textcolor{preprocessor}{->}\textcolor{preprocessor}{type}\textcolor{preprocessor}{->}\textcolor{preprocessor}{keyCompare}\textcolor{preprocessor}{(}\textcolor{preprocessor}{(}\textcolor{preprocessor}{d}\textcolor{preprocessor}{)}\textcolor{preprocessor}{->}\textcolor{preprocessor}{privdata}\textcolor{preprocessor}{,} \textcolor{preprocessor}{key1}\textcolor{preprocessor}{,} \textcolor{preprocessor}{key2}\textcolor{preprocessor}{)} \textcolor{preprocessor}{:}
00138         \textcolor{preprocessor}{(}\textcolor{preprocessor}{key1}\textcolor{preprocessor}{)} \textcolor{preprocessor}{==} \textcolor{preprocessor}{(}\textcolor{preprocessor}{key2}\textcolor{preprocessor}{)}\textcolor{preprocessor}{)}
00139 
00140 \textcolor{preprocessor}{#}\textcolor{preprocessor}{define} \textcolor{preprocessor}{dictHashKey}\textcolor{preprocessor}{(}\textcolor{preprocessor}{d}\textcolor{preprocessor}{,} \textcolor{preprocessor}{key}\textcolor{preprocessor}{)} \textcolor{preprocessor}{(}\textcolor{preprocessor}{d}\textcolor{preprocessor}{)}\textcolor{preprocessor}{->}\textcolor{preprocessor}{type}\textcolor{preprocessor}{->}\textcolor{preprocessor}{hashFunction}\textcolor{preprocessor}{(}\textcolor{preprocessor}{key}\textcolor{preprocessor}{)}
00141 \textcolor{preprocessor}{#}\textcolor{preprocessor}{define} \textcolor{preprocessor}{dictGetKey}\textcolor{preprocessor}{(}\textcolor{preprocessor}{he}\textcolor{preprocessor}{)} \textcolor{preprocessor}{(}\textcolor{preprocessor}{(}\textcolor{preprocessor}{he}\textcolor{preprocessor}{)}\textcolor{preprocessor}{->}\textcolor{preprocessor}{key}\textcolor{preprocessor}{)}
00142 \textcolor{preprocessor}{#}\textcolor{preprocessor}{define} \textcolor{preprocessor}{dictGetVal}\textcolor{preprocessor}{(}\textcolor{preprocessor}{he}\textcolor{preprocessor}{)} \textcolor{preprocessor}{(}\textcolor{preprocessor}{(}\textcolor{preprocessor}{he}\textcolor{preprocessor}{)}\textcolor{preprocessor}{->}\textcolor{preprocessor}{v}\textcolor{preprocessor}{.}\textcolor{preprocessor}{val}\textcolor{preprocessor}{)}
00143 \textcolor{preprocessor}{#}\textcolor{preprocessor}{define} \textcolor{preprocessor}{dictGetSignedIntegerVal}\textcolor{preprocessor}{(}\textcolor{preprocessor}{he}\textcolor{preprocessor}{)} \textcolor{preprocessor}{(}\textcolor{preprocessor}{(}\textcolor{preprocessor}{he}\textcolor{preprocessor}{)}\textcolor{preprocessor}{->}\textcolor{preprocessor}{v}\textcolor{preprocessor}{.}\textcolor{preprocessor}{s64}\textcolor{preprocessor}{)}
00144 \textcolor{preprocessor}{#}\textcolor{preprocessor}{define} \textcolor{preprocessor}{dictGetUnsignedIntegerVal}\textcolor{preprocessor}{(}\textcolor{preprocessor}{he}\textcolor{preprocessor}{)} \textcolor{preprocessor}{(}\textcolor{preprocessor}{(}\textcolor{preprocessor}{he}\textcolor{preprocessor}{)}\textcolor{preprocessor}{->}\textcolor{preprocessor}{v}\textcolor{preprocessor}{.}\textcolor{preprocessor}{u64}\textcolor{preprocessor}{)}
00145 \textcolor{preprocessor}{#}\textcolor{preprocessor}{define} \textcolor{preprocessor}{dictGetDoubleVal}\textcolor{preprocessor}{(}\textcolor{preprocessor}{he}\textcolor{preprocessor}{)} \textcolor{preprocessor}{(}\textcolor{preprocessor}{(}\textcolor{preprocessor}{he}\textcolor{preprocessor}{)}\textcolor{preprocessor}{->}\textcolor{preprocessor}{v}\textcolor{preprocessor}{.}\textcolor{preprocessor}{d}\textcolor{preprocessor}{)}
00146 \textcolor{preprocessor}{#}\textcolor{preprocessor}{define} \textcolor{preprocessor}{dictSlots}\textcolor{preprocessor}{(}\textcolor{preprocessor}{d}\textcolor{preprocessor}{)} \textcolor{preprocessor}{(}\textcolor{preprocessor}{(}\textcolor{preprocessor}{d}\textcolor{preprocessor}{)}\textcolor{preprocessor}{->}\textcolor{preprocessor}{ht}\textcolor{preprocessor}{[}0\textcolor{preprocessor}{]}\textcolor{preprocessor}{.}\textcolor{preprocessor}{size}\textcolor{preprocessor}{+}\textcolor{preprocessor}{(}\textcolor{preprocessor}{d}\textcolor{preprocessor}{)}\textcolor{preprocessor}{->}\textcolor{preprocessor}{ht}\textcolor{preprocessor}{[}1\textcolor{preprocessor}{]}\textcolor{preprocessor}{.}\textcolor{preprocessor}{size}\textcolor{preprocessor}{)}
00147 \textcolor{preprocessor}{#}\textcolor{preprocessor}{define} \textcolor{preprocessor}{dictSize}\textcolor{preprocessor}{(}\textcolor{preprocessor}{d}\textcolor{preprocessor}{)} \textcolor{preprocessor}{(}\textcolor{preprocessor}{(}\textcolor{preprocessor}{d}\textcolor{preprocessor}{)}\textcolor{preprocessor}{->}\textcolor{preprocessor}{ht}\textcolor{preprocessor}{[}0\textcolor{preprocessor}{]}\textcolor{preprocessor}{.}\textcolor{preprocessor}{used}\textcolor{preprocessor}{+}\textcolor{preprocessor}{(}\textcolor{preprocessor}{d}\textcolor{preprocessor}{)}\textcolor{preprocessor}{->}\textcolor{preprocessor}{ht}\textcolor{preprocessor}{[}1\textcolor{preprocessor}{]}\textcolor{preprocessor}{.}\textcolor{preprocessor}{used}\textcolor{preprocessor}{)}
00148 \textcolor{preprocessor}{#}\textcolor{preprocessor}{define} \textcolor{preprocessor}{dictIsRehashing}\textcolor{preprocessor}{(}\textcolor{preprocessor}{d}\textcolor{preprocessor}{)} \textcolor{preprocessor}{(}\textcolor{preprocessor}{(}\textcolor{preprocessor}{d}\textcolor{preprocessor}{)}\textcolor{preprocessor}{->}\textcolor{preprocessor}{rehashidx} \textcolor{preprocessor}{!=} \textcolor{preprocessor}{-}1\textcolor{preprocessor}{)}
00149 
00150 \textcolor{comment}{/* API */}
00151 dict *dictCreate(dictType *type, \textcolor{keywordtype}{void} *privDataPtr);
00152 \textcolor{keywordtype}{int} dictExpand(dict *d, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{long} size);
00153 \textcolor{keywordtype}{int} dictAdd(dict *d, \textcolor{keywordtype}{void} *key, \textcolor{keywordtype}{void} *val);
00154 dictEntry *dictAddRaw(dict *d, \textcolor{keywordtype}{void} *key, dictEntry **existing);
00155 dictEntry *dictAddOrFind(dict *d, \textcolor{keywordtype}{void} *key);
00156 \textcolor{keywordtype}{int} dictReplace(dict *d, \textcolor{keywordtype}{void} *key, \textcolor{keywordtype}{void} *val);
00157 \textcolor{keywordtype}{int} dictDelete(dict *d, \textcolor{keyword}{const} \textcolor{keywordtype}{void} *key);
00158 dictEntry *dictUnlink(dict *ht, \textcolor{keyword}{const} \textcolor{keywordtype}{void} *key);
00159 \textcolor{keywordtype}{void} dictFreeUnlinkedEntry(dict *d, dictEntry *he);
00160 \textcolor{keywordtype}{void} dictRelease(dict *d);
00161 dictEntry * dictFind(dict *d, \textcolor{keyword}{const} \textcolor{keywordtype}{void} *key);
00162 \textcolor{keywordtype}{void} *dictFetchValue(dict *d, \textcolor{keyword}{const} \textcolor{keywordtype}{void} *key);
00163 \textcolor{keywordtype}{int} dictResize(dict *d);
00164 dictIterator *dictGetIterator(dict *d);
00165 dictIterator *dictGetSafeIterator(dict *d);
00166 dictEntry *dictNext(dictIterator *iter);
00167 \textcolor{keywordtype}{void} dictReleaseIterator(dictIterator *iter);
00168 dictEntry *dictGetRandomKey(dict *d);
00169 \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} dictGetSomeKeys(dict *d, dictEntry **des, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} count);
00170 \textcolor{keywordtype}{void} dictGetStats(\textcolor{keywordtype}{char} *buf, size\_t bufsize, dict *d);
00171 uint64\_t dictGenHashFunction(\textcolor{keyword}{const} \textcolor{keywordtype}{void} *key, \textcolor{keywordtype}{int} len);
00172 uint64\_t dictGenCaseHashFunction(\textcolor{keyword}{const} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *buf, \textcolor{keywordtype}{int} len);
00173 \textcolor{keywordtype}{void} dictEmpty(dict *d, \textcolor{keywordtype}{void}(callback)(\textcolor{keywordtype}{void}*));
00174 \textcolor{keywordtype}{void} dictEnableResize(\textcolor{keywordtype}{void});
00175 \textcolor{keywordtype}{void} dictDisableResize(\textcolor{keywordtype}{void});
00176 \textcolor{keywordtype}{int} dictRehash(dict *d, \textcolor{keywordtype}{int} n);
00177 \textcolor{keywordtype}{int} dictRehashMilliseconds(dict *d, \textcolor{keywordtype}{int} ms);
00178 \textcolor{keywordtype}{void} dictSetHashFunctionSeed(uint8\_t *seed);
00179 uint8\_t *dictGetHashFunctionSeed(\textcolor{keywordtype}{void});
00180 \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{long} dictScan(dict *d, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{long} v, dictScanFunction *fn, dictScanBucketFunction *
      bucketfn, \textcolor{keywordtype}{void} *privdata);
00181 uint64\_t dictGetHash(dict *d, \textcolor{keyword}{const} \textcolor{keywordtype}{void} *key);
00182 dictEntry **dictFindEntryRefByPtrAndHash(dict *d, \textcolor{keyword}{const} \textcolor{keywordtype}{void} *oldptr, uint64\_t hash);
00183 
00184 \textcolor{comment}{/* Hash table types */}
00185 \textcolor{keyword}{extern} dictType dictTypeHeapStringCopyKey;
00186 \textcolor{keyword}{extern} dictType dictTypeHeapStrings;
00187 \textcolor{keyword}{extern} dictType dictTypeHeapStringCopyKeyValue;
00188 
00189 \textcolor{preprocessor}{#}\textcolor{preprocessor}{endif} \textcolor{comment}{/* \_\_DICT\_H */}
\end{DoxyCode}
